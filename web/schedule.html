{% extends "base.html" %}

{% block content %}
<h1>Youth Schedule</h1>
<p>Select a date and assign roles:</p>

<form id="schedule-form" method="POST" action="/submit">
    <!-- Date Dropdown -->
    <div>
        <label for="date">Date:</label>
        <select id="date" name="date" onchange="submitToSchedule()">
            <option value="" disabled {% if not selected_date %}selected{% endif %}>Select a date</option>
            {% for date in dates %}
                <option value="{{ date }}" {% if date == selected_date %}selected{% endif %}>{{ date }}</option>
            {% endfor %}
        </select>
    </div>

    <!-- Role and Name Dropdowns in a Table -->
    <table border="1" style="width: 50%; border-collapse: collapse; text-align: left; margin-top: 20px;">
        <thead>
            <tr>
                <th>Role</th>
                <th>Name</th>
            </tr>
        </thead>
        <tbody>
            {% for role, name in roles.items() %}
                <tr>
                    <td>{{ role }}</td>
                    <td>
                        <select id="{{ role }}" name="{{ role }}">
                            <option value="" {% if name == "" %}selected{% endif %}> </option>
                            <option value="Lilian" {% if name == "Lilian" %}selected{% endif %}>Lilian</option>
                            <option value="Sarah" {% if name == "Sarah" %}selected{% endif %}>Sarah</option>
                            <option value="Annie" {% if name == "Annie" %}selected{% endif %}>Annie</option>
                            <option value="Jeremy" {% if name == "Jeremy" %}selected{% endif %}>Jeremy</option>
                            <option value="Andrea" {% if name == "Andrea" %}selected{% endif %}>Andrea</option>
                            <option value="Emma" {% if name == "Emma" %}selected{% endif %}>Emma</option>
                            <option value="Selina" {% if name == "Selina" %}selected{% endif %}>Selina</option>
                            <option value="Faith" {% if name == "Faith" %}selected{% endif %}>Faith</option>
                            <option value="Abby" {% if name == "Abby" %}selected{% endif %}>Abby</option>
                            <option value="Aslan" {% if name == "Aslan" %}selected{% endif %}>Aslan</option>
                            <option value="Ethan" {% if name == "Ethan" %}selected{% endif %}>Ethan</option>
                            <option value="Abel" {% if name == "Abel" %}selected{% endif %}>Abel</option>
                            <option value="Jessica" {% if name == "Jessica" %}selected{% endif %}>Jessica</option>
                            <option value="Rachel" {% if name == "Rachel" %}selected{% endif %}>Rachel</option>
                            <option value="Rae-Anne" {% if name == "Rae-Anne" %}selected{% endif %}>Rae-Anne</option>
                            <option value="Arielle" {% if name == "Arielle" %}selected{% endif %}>Arielle</option>
                            <option value="Yu-Ang" {% if name == "Yu-Ang" %}selected{% endif %}>Yu-Ang</option>

                        </select>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <button type="submit" style="margin-top: 20px;">Submit</button>
</form>

<script>
    function submitToSchedule() {
        const form = document.getElementById('schedule-form');
        form.action = '/schedule'; // Change action to /schedule
        form.submit(); // Submit the form
    }
</script>
{% endblock %}
